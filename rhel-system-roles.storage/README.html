<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title></title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="linux-storage-role">Linux Storage Role</h2>
<div class="sectionbody">
<div class="paragraph"><p>This role allows users to configure local storage with minimal input.</p></div>
<div class="paragraph"><p>As of now, the role supports managing file systems and mount entries on</p></div>
<div class="ulist"><ul>
<li>
<p>
unpartitioned disks
</p>
</li>
<li>
<p>
lvm (unpartitioned whole-disk physical volumes only)
</p>
</li>
</ul></div>
<div class="sect2">
<h3 id="requirements">Requirements</h3>
<div class="paragraph"><p>None</p></div>
</div>
<div class="sect2">
<h3 id="role-variables">Role Variables</h3>
<div class="paragraph"><p><strong>NOTE</strong>: Beginning with version 1.3.0, unspecified parameters are
interpreted differently for existing and non-existing pools/volumes. For
new/non-existent pools and volumes, any omitted parameters will use the
default value as described in <code>defaults/main.yml</code>. For existing pools
and volumes, omitted parameters will inherit whatever setting the pool
or volume already has. This means that to change/override role defaults
in an existing pool or volume, you must explicitly specify the new
values/settings in the role variables.</p></div>
<div class="sect3">
<h4 id="storage_pools"><code>storage_pools</code></h4>
<div class="paragraph"><p>The <code>storage_pools</code> variable is a list of pools to manage. Each pool
contains a nested list of <code>volume</code> dicts as described below, as well as
the following keys:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>name</code>
</p>
<div class="paragraph"><p>This specifies the name of the pool to manage/create as a string. (One
example of a pool is an LVM volume group.)
* <code>type</code></p></div>
<div class="paragraph"><p>This specifies the type of pool to manage. Valid values for <code>type</code>:
<code>lvm</code>.
* <code>disks</code></p></div>
<div class="paragraph"><p>A list which specifies the set of disks to use as backing storage for
the pool. Supported identifiers include: device node (like <code>/dev/sda</code> or
<code>/dev/mapper/mpathb</code>), device node basename (like <code>sda</code> or <code>mpathb</code>),
/dev/disk/ symlink (like <code>/dev/disk/by-id/wwn-0x5000c5005bc37f3f</code>).</p></div>
<div class="paragraph"><p>For LVM pools this can be also used to add and remove disks to/from an
existing pool. Disks in the list that are not used by the pool will be
added to the pool. Disks that are currently used by the pool but not
present in the list will be removed from the pool only if
<code>storage_safe_mode</code> is set to <code>false</code>.
* <code>raid_level</code></p></div>
<div class="paragraph"><p>When used with <code>type: lvm</code> it manages a volume group with a mdraid array
of given level on it. Input <code>disks</code> are in this case used as RAID
members. Accepted values are: <code>linear</code>, <code>raid0</code>, <code>raid1</code>, <code>raid4</code>,
<code>raid5</code>, <code>raid6</code>, <code>raid10</code>
* <code>volumes</code></p></div>
<div class="paragraph"><p>This is a list of volumes that belong to the current pool. It follows
the same pattern as the <code>storage_volumes</code> variable, explained below.
* <code>encryption</code></p></div>
<div class="paragraph"><p>This specifies whether the pool will be encrypted using LUKS. <strong>WARNING</strong>:
Toggling encryption for a pool is a destructive operation, meaning the
pool itself will be removed as part of the process of adding/removing
the encryption layer.
* <code>encryption_password</code></p></div>
<div class="paragraph"><p>This string specifies a password or passphrase used to unlock/open the
LUKS volume(s).
* <code>encryption_key</code></p></div>
<div class="paragraph"><p>This string specifies the full path to the key file on the managed nodes
used to unlock the LUKS volume(s). It is the responsibility of the user
of this role to securely copy this file to the managed nodes, or
otherwise ensure that the file is on the managed nodes.
* <code>encryption_cipher</code></p></div>
<div class="paragraph"><p>ifies a non-default cipher to be used by LUKS.
* <code>encryption_key_size</code></p></div>
<div class="paragraph"><p>s the LUKS key size (in bytes).
* <code>encryption_luks_version</code></p></div>
<div class="paragraph"><p>This integer specifies the LUKS version to use.</p></div>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="storage_volumes"><code>storage_volumes</code></h4>
<div class="paragraph"><p>The <code>storage_volumes</code> variable is a list of volumes to manage. Each
volume has the following variables:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>name</code>
</p>
<div class="paragraph"><p>This specifies the name of the volume.
* <code>type</code></p></div>
<div class="paragraph"><p>This specifies the type of volume on which the file system will reside.
Valid values for <code>type</code>: <code>lvm</code>, <code>disk</code> or <code>raid</code>. The default is
determined according to the OS and release (currently <code>lvm</code>).
* <code>disks</code></p></div>
<div class="paragraph"><p>This specifies the set of disks to use as backing storage for the file
system. This is currently only relevant for volumes of type <code>disk</code>,
where the list must contain only a single item.
* <code>size</code></p></div>
<div class="paragraph"><p>The <code>size</code> specifies the size of the file system. The format for this is
intended to be human-readable, e.g.: "10g", "50 GiB". The size of LVM
volumes can be specified as a percentage of the pool/VG size, eg: "50%"
as of v1.4.2.</p></div>
<div class="paragraph"><p>When using <code>compression</code> or <code>deduplication</code>, <code>size</code> can be set higher
than actual available space, e.g.: 3 times the size of the volume, based
on duplicity and/or compressibility of stored data.</p></div>
<div class="paragraph"><p><strong>NOTE</strong>: The requested volume size may be reduced as necessary so the
volume can fit in the available pool space, but only if the required
reduction is not more than 2% of the requested volume size.
* <code>fs_type</code></p></div>
<div class="paragraph"><p>This indicates the desired file system type to use, e.g.: "xfs", "ext4",
"swap". The default is determined according to the OS and release
(currently <code>xfs</code> for all the supported systems).
* <code>fs_label</code></p></div>
<div class="paragraph"><p>The <code>fs_label</code> is a string to be used for a file system label.
* <code>fs_create_options</code></p></div>
<div class="paragraph"><p>The <code>fs_create_options</code> specifies custom arguments to <code>mkfs</code> as a
string.
* <code>mount_point</code></p></div>
<div class="paragraph"><p>The <code>mount_point</code> specifies the directory on which the file system will
be mounted.
* <code>mount_options</code></p></div>
<div class="paragraph"><p>The <code>mount_options</code> specifies custom mount options as a string, e.g.:
<em>ro</em>.
* <code>mount_user</code></p></div>
<div class="paragraph"><p>The <code>mount_user</code> specifies desired owner of the mount directory.
* <code>mount_group</code></p></div>
<div class="paragraph"><p>The <code>mount_group</code> specifies desired group of the mount directory.
* <code>mount_mode</code></p></div>
<div class="paragraph"><p>The <code>mount_mode</code> specifies desired permissions of the mount directory.
* <code>raid_level</code></p></div>
<div class="paragraph"><p>Specifies RAID level. LVM RAID can be created as well. "Regular" RAID
volume requires type to be <code>raid</code>. LVM RAID needs that volume has
<code>storage_pools</code> parent with type <code>lvm</code>, <code>raid_disks</code> need to be
specified as well. Accepted values are:
<strong> for LVM RAID volume: <code>raid0</code>, <code>raid1</code>, <code>raid4</code>, <code>raid5</code>, <code>raid6</code>,
<code>raid10</code>, <code>striped</code>, <code>mirror</code>
</strong> for RAID volume: <code>linear</code>, <code>raid0</code>, <code>raid1</code>, <code>raid4</code>, <code>raid5</code>,
<code>raid6</code>, <code>raid10</code></p></div>
<div class="paragraph"><p><strong>WARNING</strong>: Changing <code>raid_level</code> for a volume is a destructive
operation, meaning all data on that volume will be lost as part of the
process of removing old and adding new RAID. RAID reshaping is currently
not supported.
* <code>raid_device_count</code></p></div>
<div class="paragraph"><p>When type is <code>raid</code> specifies number of active RAID devices.
* <code>raid_spare_count</code></p></div>
<div class="paragraph"><p>When type is <code>raid</code> specifies number of spare RAID devices.
* <code>raid_metadata_version</code></p></div>
<div class="paragraph"><p>When type is <code>raid</code> specifies RAID metadata version as a string, e.g.:
<em>1.0</em>.
* <code>raid_chunk_size</code></p></div>
<div class="paragraph"><p>When type is <code>raid</code> specifies RAID chunk size as a string, e.g.: <em>512
KiB</em>. Chunk size has to be multiple of 4 KiB.
* <code>raid_stripe_size</code></p></div>
<div class="paragraph"><p>When type is <code>lvm</code> specifies LVM RAID stripe size as a string, e.g.:
<em>512 KiB</em>.
* <code>raid_disks</code></p></div>
<div class="paragraph"><p>Specifies which disks should be used for LVM RAID volume. <code>raid_level</code>
needs to be specified and volume has to have <code>storage_pools</code> parent with
type <code>lvm</code>. Accepts sublist of <code>disks</code> of parent <code>storage_pools</code>. In
case multiple LVM RAID volumes within the same storage pool, the same
disk can be used in multiple <code>raid_disks</code>.
* <code>encryption</code></p></div>
<div class="paragraph"><p>This specifies whether the volume will be encrypted using LUKS.
<strong>WARNING</strong>: Toggling encryption for a volume is a destructive operation,
meaning all data on that volume will be removed as part of the process
of adding/removing the encryption layer.
* <code>encryption_password</code></p></div>
<div class="paragraph"><p>This string specifies a password or passphrase used to unlock/open the
LUKS volume.
* <code>encryption_key</code></p></div>
<div class="paragraph"><p>This string specifies the full path to the key file on the managed nodes
used to unlock the LUKS volume(s). It is the responsibility of the user
of this role to securely copy this file to the managed nodes, or
otherwise ensure that the file is on the managed nodes.
* <code>encryption_cipher</code></p></div>
<div class="paragraph"><p>This string specifies a non-default cipher to be used by LUKS.
* <code>encryption_key_size</code></p></div>
<div class="paragraph"><p>This integer specifies the LUKS key size (in bits).
* <code>encryption_luks_version</code></p></div>
<div class="paragraph"><p>This integer specifies the LUKS version to use.
* <code>deduplication</code></p></div>
<div class="paragraph"><p>This specifies whether the Virtual Data Optimizer (VDO) will be used.
When set, duplicate data stored on storage volume will be deduplicated
resulting in more storage capacity. Can be used together with
<code>compression</code> and <code>vdo_pool_size</code>. Volume has to be part of the LVM
<code>storage_pool</code>. Limit one VDO <code>storage_volume</code> per <code>storage_pool</code>.
Underlying volume has to be at least 9 GB (bare minimum is around 5
GiB).
* <code>compression</code></p></div>
<div class="paragraph"><p>This specifies whether the Virtual Data Optimizer (VDO) will be used.
When set, data stored on storage volume will be compressed resulting in
more storage capacity. Volume has to be part of the LVM <code>storage_pool</code>.
Can be used together with <code>deduplication</code> and <code>vdo_pool_size</code>. Limit one
VDO <code>storage_volume</code> per <code>storage_pool</code>.
* <code>vdo_pool_size</code></p></div>
<div class="paragraph"><p>When Virtual Data Optimizer (VDO) is used, this specifies the actual
size the volume will take on the device. Virtual size of VDO volume is
set by <code>size</code> parameter. <code>vdo_pool_size</code> format is intended to be
human-readable, e.g.: "30g", "50GiB". Default value is equal to the size
of the volume.</p></div>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="cached"><code>cached</code></h4>
<div class="paragraph"><p>This specifies whether the volume should be cached or not. This is
currently supported only for LVM volumes where dm-cache is used.</p></div>
</div>
<div class="sect3">
<h4 id="cache_size"><code>cache_size</code></h4>
<div class="paragraph"><p>Size of the cache. <code>cache_size</code> format is intended to be human-readable,
e.g.: "30g", "50GiB".</p></div>
</div>
<div class="sect3">
<h4 id="cache_mode"><code>cache_mode</code></h4>
<div class="paragraph"><p>Mode for the cache. Supported values include <code>writethrough</code> (default)
and <code>writeback</code>.</p></div>
</div>
<div class="sect3">
<h4 id="cache_devices"><code>cache_devices</code></h4>
<div class="paragraph"><p>List of devices that will be used for the cache. These should be either
physical volumes or drives these physical volumes are allocated on.
Generally you want to select fast devices like SSD or NVMe drives for
cache.</p></div>
</div>
<div class="sect3">
<h4 id="thin"><code>thin</code></h4>
<div class="paragraph"><p>Whether the volume should be thinly provisioned or not. This is
supported only for LVM volumes.</p></div>
</div>
<div class="sect3">
<h4 id="thin_pool_name"><code>thin_pool_name</code></h4>
<div class="paragraph"><p>For <code>thin</code> volumes, this can be used to specify the name of the LVM thin
pool that will be used for the volume. If the pool with the provided
name already exists, the volume will be added to that pool. If it
doesn&#8217;t exist a new pool named <code>thin_pool_name</code> will be created. If not
specified:</p></div>
<div class="ulist"><ul>
<li>
<p>
if there are no existing thin pools present, a new thin pool will be
created with an automatically generated name,
</p>
</li>
<li>
<p>
if there is exactly one existing thin pool, the thin volume will be
added to it and
</p>
</li>
<li>
<p>
if there are multiple thin pools present an exception will be raised.
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="thin_pool_size"><code>thin_pool_size</code></h4>
<div class="paragraph"><p>Size for the thin pool. <code>thin_pool_size</code> format is intended to be
human-readable, e.g.: "30g", "50GiB".</p></div>
</div>
<div class="sect3">
<h4 id="storage_safe_mode"><code>storage_safe_mode</code></h4>
<div class="paragraph"><p>When true (the default), an error will occur instead of automatically
removing existing devices and/or formatting.</p></div>
</div>
<div class="sect3">
<h4 id="storage_udevadm_trigger"><code>storage_udevadm_trigger</code></h4>
<div class="paragraph"><p>When true (the default is false), the role will use udevadm trigger to
cause udev changes to take effect immediately. This may help on some
platforms with "buggy" udev.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="example-playbook">Example Playbook</h3>
<div class="listingblock">
<div class="content">
<pre><code>- <span style="color:#000000; font-weight:bold">name:</span> Manage storage
  <span style="color:#000000; font-weight:bold">hosts:</span> all
  <span style="color:#000000; font-weight:bold">roles:</span>
    - <span style="color:#000000; font-weight:bold">name:</span> rhel-system-<span style="color:#000000; font-weight:bold">roles</span>.storage
      <span style="color:#000000; font-weight:bold">storage_pools:</span>
        - <span style="color:#000000; font-weight:bold">name:</span> app
          <span style="color:#000000; font-weight:bold">disks:</span>
            - sdb
            - sdc
          <span style="color:#000000; font-weight:bold">volumes:</span>
            - <span style="color:#000000; font-weight:bold">name:</span> shared
              <span style="color:#000000; font-weight:bold">size:</span> <span style="color:#bf0303">&quot;100 GiB&quot;</span>
              <span style="color:#000000; font-weight:bold">mount_point:</span> <span style="color:#bf0303">&quot;/mnt/app/shared&quot;</span>
              <span style="color:#838183; font-style:italic">#fs_type: xfs</span>
              <span style="color:#000000; font-weight:bold">state:</span> present
            - <span style="color:#000000; font-weight:bold">name:</span> users
              <span style="color:#000000; font-weight:bold">size:</span> <span style="color:#bf0303">&quot;400g&quot;</span>
              <span style="color:#000000; font-weight:bold">fs_type:</span> ext<span style="color:#b07e00">4</span>
              <span style="color:#000000; font-weight:bold">mount_point:</span> <span style="color:#bf0303">&quot;/mnt/app/users&quot;</span>
      <span style="color:#000000; font-weight:bold">storage_volumes:</span>
        - <span style="color:#000000; font-weight:bold">name:</span> images
          <span style="color:#000000; font-weight:bold">type:</span> disk
          <span style="color:#000000; font-weight:bold">disks:</span> <span style="color:#000000">[</span><span style="color:#bf0303">&quot;mpathc&quot;</span><span style="color:#000000">]</span>
          <span style="color:#000000; font-weight:bold">mount_point:</span> /opt/images
          <span style="color:#000000; font-weight:bold">fs_label:</span> images</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="license">License</h3>
<div class="paragraph"><p>MIT</p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
</div>
</body>
</html>
